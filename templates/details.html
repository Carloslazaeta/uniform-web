<script>
    function saveChanges() {
        let statusElements = document.querySelectorAll(".status");
        let updatedStatuses = [];

        statusElements.forEach(element => {
            updatedStatuses.push(element.value);
        });

        fetch("/update", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                name: "{{ name }}",
                row_index: "{{ row_index }}",
                values: updatedStatuses
            })
        }).then(response => response.json())
          .then(data => alert(data.message))
          .catch(error => alert("Error saving data: " + error));
    }

    document.addEventListener("DOMContentLoaded", calculateTotalHours);
</script>
