<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Details</title>
    <script>
        async function saveData() {
            let formData = new FormData(document.getElementById("updateForm"));
            const response = await fetch("/update", {
                method: "POST",
                body: formData
            });
            if (response.ok) {
                alert("Datos guardados correctamente");
            } else {
                alert("Error al guardar los datos");
            }
        }

        function autoSave() {
            clearTimeout(window.saveTimeout);
            window.saveTimeout = setTimeout(saveData, 2000);  // Guarda despu√©s de 2 segundos
        }
    </script>
</head>
<body>
    <h1>Details of {{ name }}</h1>
    <form id="updateForm" method="POST" action="/update">
        <input type="hidden" name="row_index" value="{{ row_index }}">
        {% for index, (header, value) in zipped_data %}
            <label>{{ header }}:</label>
            <input type="text" name="data_{{ index }}" value="{{ value }}" oninput="autoSave()">
            <br>
        {% endfor %}
        <button type="button" onclick="saveData()">Guardar</button>
    </form>
</body>
</html>
